import{a as he,b as _e,d as ge,e as fe,i as P}from"./chunk-CWY36QXW.js";import{a as me}from"./chunk-GNKIOLDK.js";import{b as ue}from"./chunk-P6CIFDO5.js";import{l as ae,m as le}from"./chunk-NIGDHIPV.js";import{a as de}from"./chunk-SOFS53MN.js";import{a as ce}from"./chunk-5I4ANEOW.js";import{a as pe}from"./chunk-ZEHU2A57.js";import{a as se}from"./chunk-HVORON4Y.js";import"./chunk-TQWQFZO7.js";import"./chunk-ZBZRXBUQ.js";import{A as te,B as ne,C as oe,T as R,U as re,e as J,g as X,h as Y,k as A,m as Z,oa as v,q as ee,t as ie}from"./chunk-P74FXGQP.js";import{h as W,l as z}from"./chunk-MWLJ7KQD.js";import"./chunk-Z5C4ODF3.js";import{c as $,d as N}from"./chunk-NFASJCFR.js";import{Ac as q,Ec as G,Fc as O,Hb as x,Jb as b,Kc as c,Lc as d,Mb as L,Nb as j,Ob as s,Oc as K,Pb as a,Qb as l,Rb as h,Yc as V,Zb as C,ab as r,ac as S,cc as u,ja as m,jc as w,kc as F,nb as E,pc as D,qa as f,qc as _,ra as y,rc as T,sc as k,sd as H,tb as M,zd as U}from"./chunk-BJL3QR55.js";import{d as Q}from"./chunk-4CLCTAJ7.js";var Ce=["countryShippingModal"],Me=()=>[];function xe(e,n){e&1&&(a(0,"div",6),_(1),c(2,"translate"),l()),e&2&&(r(),T(d(2,1,"country_is_required")))}function be(e,n){if(e&1){let o=C();a(0,"form",1),S("ngSubmit",function(){f(o);let i=u();return y(i.submit())}),a(1,"div",2)(2,"h5",3),_(3),c(4,"translate"),l(),a(5,"div",4),h(6,"select2",5),c(7,"translate"),c(8,"translate"),x(9,xe,3,3,"div",6),l(),a(10,"div",7)(11,"app-button",8),S("click",function(){let i=f(o).$implicit;return y(i.dismiss("Cancel"))}),_(12),c(13,"translate"),l(),a(14,"app-button",9),_(15),c(16,"translate"),l()()()()}if(e&2){let o=u();s("formGroup",o.form),r(3),T(d(4,18,"select_country")),r(3),s("noResultMessage",q(d(7,20,"no_data_found")))("data",o.countries!=null&&o.countries.length?o.countries:G(28,Me))("placeholder",d(8,22,"select_country"))("multiple",!0),r(3),b(o.form.controls.country_id.touched&&(o.form.controls.country_id.errors!=null&&o.form.controls.country_id.errors.required)?9:-1),r(2),D("btn-md fw-bold btn btn-outline"),s("spinner",!1)("id","shipping_country_no_btn")("type","button"),r(),k(" ",d(13,24,"cancel")," "),r(2),D("btn-theme btn-md fw-bold btn"),s("id","shipping_country_yes_btn"),r(),k(" ",d(16,26,"submit")," ")}}var ye=(()=>{let n=class n{constructor(){this.modalService=m(re),this.store=m(v),this.formBuilder=m(te),this.countries$=m(v).select(ue.countries),this.shipping$=m(v).select(P.shipping),this.modalOpen=!1,this.countries=[],this.CountryShippingModal=V("countryShippingModal"),this.form=this.formBuilder.group({country_id:new A("",[J.required]),status:new A(1)}),this.shipping$.subscribe(t=>{this.countries$.subscribe(i=>{this.countries=i.filter(p=>!t.data.map(g=>Number(g.country_id)).includes(Number(p.value)))})})}openModal(t){return Q(this,null,function*(){this.modalOpen=!0,this.data=null,t&&(this.data=t,this.form.patchValue({country_id:t?.country_id,status:t?.status})),this.modalService.open(this.CountryShippingModal(),{ariaLabelledBy:"Shipping-country-Modal",centered:!0,windowClass:"theme-modal"}).result.then(i=>{`${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})})}getDismissReason(t){return t===R.ESC?"by pressing ESC":t===R.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}submit(){this.form.markAllAsTouched();let t=new _e(this.form.value);this.data&&(t=new ge(this.form.value,this.data.id)),this.form.valid&&this.store.dispatch(t).subscribe({complete:()=>{this.form.controls.country_id.reset(),this.modalService.dismissAll()}})}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=E({type:n,selectors:[["app-shipping-country-modal"]],viewQuery:function(i,p){i&1&&w(p.CountryShippingModal,Ce,5),i&2&&F()},decls:2,vars:0,consts:[["countryShippingModal",""],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"modal-title","text-center"],[1,"mb-4"],["formControlName","country_id","resettable","",1,"custom-select",3,"data","placeholder","noResultMessage","multiple"],[1,"invalid-feedback"],[1,"button-box"],[3,"click","spinner","id","type"],[3,"id"]],template:function(i,p){i&1&&M(0,be,17,29,"ng-template",null,0,K)},dependencies:[N,ne,Z,X,Y,oe,ee,ie,le,ae,se,$],encapsulation:2});let e=n;return e})();var we=["countryShippingModal"],De=["deleteModal"],Te=e=>["/shipping/edit/",e],ke=(e,n)=>n.id;function Ve(e,n){if(e&1){let o=C();a(0,"div",7)(1,"a",8),S("click",function(){f(o);let i=u();return y(i.CountryShippingModal().openModal())}),h(2,"i",9),_(3),c(4,"translate"),l()()}e&2&&(r(3),k(" ",d(4,1,"select_country")," "))}function Be(e,n){if(e&1&&(a(0,"a",13),h(1,"i",14),l()),e&2){let o=u().$implicit;s("routerLink",O(1,Te,o==null?null:o.id))}}function Ee(e,n){if(e&1){let o=C();a(0,"a",15),S("click",function(){f(o);let i=u().$implicit,p=u(2);return y(p.DeleteModal().openModal("delete",i))}),h(1,"i",16),l()}}function Fe(e,n){if(e&1&&(a(0,"li")(1,"a",10)(2,"h5"),_(3),l()(),a(4,"div"),M(5,Be,2,3,"a",11)(6,Ee,2,0,"a",12),l()()),e&2){let o=n.$implicit;r(3),T(o==null||o.country==null?null:o.country.name),r(2),s("hasPermission","shipping.edit"),r(),s("hasPermission","shipping.destroy")}}function $e(e,n){if(e&1&&(a(0,"ul",4),L(1,Fe,7,3,"li",null,ke),c(3,"async"),l()),e&2){let o,t=u();r(),j((o=d(3,0,t.shipping$))==null?null:o.data)}}function Ne(e,n){e&1&&h(0,"app-no-data",17),e&2&&(D("no-data-added no-shipping"),s("image","assets/svg/no-category.png")("text","No Data Found"))}var di=(()=>{let n=class n{constructor(){this.store=m(v),this.shipping$=m(v).select(P.shipping),this.CountryShippingModal=V("countryShippingModal"),this.DeleteModal=V("deleteModal"),this.store.dispatch(new he)}delete(t,i){this.store.dispatch(new fe(i?.id))}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=E({type:n,selectors:[["app-shipping"]],viewQuery:function(i,p){i&1&&(w(p.CountryShippingModal,we,5),w(p.DeleteModal,De,5)),i&2&&F(2)},decls:10,vars:9,consts:[["countryShippingModal",""],["deleteModal",""],[3,"gridClass","title"],["button","",4,"hasPermission"],[1,"country-list"],[3,"class","image","text"],[3,"deleteItem"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"click"],[1,"ri-add-line"],["href","javascript:void(0)"],["class","me-2",3,"routerLink",4,"hasPermission"],["href","javascript:void(0)",3,"click",4,"hasPermission"],[1,"me-2",3,"routerLink"],[1,"ri-pencil-line","text-success"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-7-line","text-danger"],[3,"image","text"]],template:function(i,p){if(i&1){let g=C();a(0,"app-page-wrapper",2),M(1,Ve,5,3,"div",3),x(2,$e,4,2,"ul",4),c(3,"async"),x(4,Ne,1,4,"app-no-data",5),c(5,"async"),l(),h(6,"app-shipping-country-modal",null,0),a(8,"app-delete-modal",6,1),S("deleteItem",function(I){return f(g),y(p.delete(I.actionToPerform,I.data))}),l()}if(i&2){let g,B;s("gridClass","col-xxl-8 m-auto")("title","shipping"),r(),s("hasPermission","shipping.create"),r(),b(!((g=d(3,5,p.shipping$))==null||g.data==null)&&g.data.length?2:-1),r(2),b(!((B=d(5,7,p.shipping$))==null||B.data==null)&&B.data.length?-1:4)}},dependencies:[U,z,W,N,de,pe,me,ye,ce,H,$],encapsulation:2});let e=n;return e})();export{di as Shipping};
