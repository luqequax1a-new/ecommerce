import './polyfills.server.mjs';
import{a as T}from"./chunk-M3S6EIBM.mjs";import{a as P,b as V,c as R}from"./chunk-ZBBV5PSR.mjs";import{a as M}from"./chunk-22TZ6IH2.mjs";import"./chunk-HSYTOS5X.mjs";import"./chunk-65CLJ2AQ.mjs";import"./chunk-6TRN37HW.mjs";import"./chunk-725TIIX2.mjs";import"./chunk-UGRILRVZ.mjs";import"./chunk-HF4BIA72.mjs";import{a as v}from"./chunk-RXOQFJCA.mjs";import"./chunk-MD4PGILL.mjs";import"./chunk-36I6ZS5W.mjs";import"./chunk-7WHNMFBW.mjs";import{oa as _}from"./chunk-ZL7RZNVT.mjs";import"./chunk-JTNA5OIK.mjs";import"./chunk-D5OUPU4G.mjs";import"./chunk-XXCMIAG3.mjs";import{Ub as s,Vb as c,Wb as f,dc as g,dd as C,eb as u,gc as m,ja as p,pc as h,qa as r,qc as w,ra as n,rb as y}from"./chunk-GYKPLZNJ.mjs";import"./chunk-S6KH3LOX.mjs";var A=["payoutModal"],G=(()=>{let i=class i{constructor(){this.store=p(_),this.refund$=p(_).select(R.refund),this.PayoutModal=C("payoutModal"),this.tableConfig={columns:[{title:"order_number",dataField:"order_id"},{title:"consumer_name",dataField:"consumer_name",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"refund_status"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"View",actionToPerform:"view",icon:"ri-eye-line"}],data:[],total:0}}ngOnInit(){this.refund$.subscribe(t=>{let a=t?.data?.filter(e=>(e.consumer_name=e?.user?.name,e.order_id=`<span class="fw-bolder">#${e?.order?.order_number}</span>`,e.refund_status=e.status?`<div class="status-${e.status}"><span>${e.status.replace(/_/g," ")}</span></div>`:"-",e));this.tableConfig.data=t?a:[],this.tableConfig.total=t?t?.total:0})}onActionClicked(t){t.actionToPerform=="view"&&this.PayoutModal().openModal(t.data)}onTableChange(t){this.store.dispatch(new P(t))}approved(t){this.store.dispatch(new V(t.data.id,t.status))}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=y({type:i,selectors:[["app-refund"]],viewQuery:function(a,e){a&1&&h(e.PayoutModal,A,5),a&2&&w()},decls:4,vars:5,consts:[["payoutModal",""],[3,"gridClass","title"],[3,"tableChanged","action","tableConfig"],[3,"payout","label","action"]],template:function(a,e){if(a&1){let l=g();c(0,"app-page-wrapper",1)(1,"app-table",2),m("tableChanged",function(o){return r(l),n(e.onTableChange(o))})("action",function(o){return r(l),n(e.onActionClicked(o))}),f()(),c(2,"app-payout-modal",3,0),m("payout",function(o){return r(l),n(e.approved(o))}),f()}a&2&&(s("gridClass","col-sm-12")("title","refund"),u(),s("tableConfig",e.tableConfig),u(),s("label","refund")("action",!1))},dependencies:[v,M,T],encapsulation:2});let d=i;return d})();export{G as Refund};
