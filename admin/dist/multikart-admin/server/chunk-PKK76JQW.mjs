import './polyfills.server.mjs';
import{a as L}from"./chunk-22TZ6IH2.mjs";import"./chunk-HSYTOS5X.mjs";import"./chunk-65CLJ2AQ.mjs";import{d as D}from"./chunk-6TRN37HW.mjs";import{a as M}from"./chunk-725TIIX2.mjs";import"./chunk-UGRILRVZ.mjs";import"./chunk-HF4BIA72.mjs";import{a as I}from"./chunk-RXOQFJCA.mjs";import"./chunk-MD4PGILL.mjs";import"./chunk-36I6ZS5W.mjs";import{a as $,e as x,f as R,g as B,h as E}from"./chunk-ERHF4JSB.mjs";import"./chunk-7WHNMFBW.mjs";import{oa as p}from"./chunk-ZL7RZNVT.mjs";import{h as P,i as y,m as A}from"./chunk-JTNA5OIK.mjs";import"./chunk-D5OUPU4G.mjs";import{c as k,d as F}from"./chunk-XXCMIAG3.mjs";import{Ka as f,Kc as C,Qc as w,Rc as T,Ub as l,Vb as d,Wb as m,Xb as _,Yd as S,eb as s,gc as b,ja as a,rb as h,wc as g,xb as u,yc as v}from"./chunk-GYKPLZNJ.mjs";import"./chunk-S6KH3LOX.mjs";var O=()=>["/store/create"];function j(r,i){r&1&&(d(0,"div",3)(1,"a",4),_(2,"i",5),g(3),w(4,"translate"),m()()),r&2&&(s(),l("routerLink",C(4,O)),s(2),v(" ",T(4,2,"add_store")," "))}var te=(()=>{let i=class i{constructor(){this.store=a(p),this.router=a(P),this.platformId=a(f),this.store$=a(p).select(E.store),this.setting$=a(p).select(D.setting),this.tableConfig={columns:[{title:"Logo",dataField:"store_logo",class:"tbl-logo-image",type:"image",key:"store_name"},{title:"store_name",dataField:"store_name"},{title:"name",dataField:"vendor_name"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"approved",dataField:"is_approved",type:"switch",canAllow:["admin"]}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"store.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"store.destroy"},{label:"View",actionToPerform:"view",icon:"ri-eye-line"}],data:[],total:0},this.setting$.subscribe(e=>{e&&e.general&&(this.url=e.general.site_url)})}ngOnInit(){this.store$.subscribe(e=>{let o=e?.data?.filter(t=>(t.vendor_name=t.vendor.name,t));this.tableConfig.data=o||[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new $(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="is_approved"?this.approve(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"?this.deleteAll(e.data):e.actionToPerform=="view"&&this.view(e.data)}edit(e){this.router.navigateByUrl(`/store/edit/${e.id}`)}approve(e){this.store.dispatch(new x(e.id,e.is_approved))}delete(e){this.store.dispatch(new R(e.id))}deleteAll(e){this.store.dispatch(new B(e))}view(e){S(this.platformId)&&window.open(this.url+"/seller/store/"+e.slug,"_blank")}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=h({type:i,selectors:[["app-stores"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(o,t){o&1&&(d(0,"app-page-wrapper",0),u(1,j,5,5,"div",1),d(2,"app-table",2),b("tableChanged",function(n){return t.onTableChange(n)})("rowClicked",function(n){return t.edit(n)})("action",function(n){return t.onActionClicked(n)}),m()()),o&2&&(l("gridClass","col-sm-12")("title","store"),s(),l("hasPermission","store.create"),s(),l("tableConfig",t.tableConfig)("hasCheckbox",!0))},dependencies:[A,y,F,M,I,L,k],encapsulation:2});let r=i;return r})();export{te as Stores};
