import './polyfills.server.mjs';
import{c as N}from"./chunk-CQLQNQNT.mjs";import{Ga as $}from"./chunk-ZL7RZNVT.mjs";import{Da as T,Gc as C,Hc as k,Kc as b,Nb as p,Pb as d,Rb as M,Sb as P,Tb as S,Td as D,Ub as c,Vb as s,Wb as g,Xb as r,bb as h,bd as z,cd as I,dc as x,dd as E,eb as l,gc as f,ic as o,pc as F,qa as _,qc as V,ra as u,rb as U,wc as v,xc as w}from"./chunk-GYKPLZNJ.mjs";var O=["mediaModal"],Q=()=>[];function R(e,m){if(e&1&&r(0,"img",7),e&2){let i=o(2).$implicit;c("src",C(i==null?null:i.original_url),h)}}function j(e,m){if(e&1&&r(0,"img",7),e&2){let i=o(2).$implicit,a=o();c("src",a.getMimeTypeImage(i.mime_type),h)}}function W(e,m){if(e&1){let i=x();s(0,"div",3),p(1,R,1,2,"img",7)(2,j,1,1,"img",7),s(3,"a",8),f("click",function(){_(i);let n=o().$index,t=o();return u(t.remove(n,"multiple"))}),r(4,"i",9),g()(),s(5,"h6"),v(6),g()}if(e&2){let i=o(),a=i.$implicit,n=i.$index;l(),d(a&&a.mime_type&&a.mime_type.startsWith("image")?1:2),l(2),c("id",k("remove-icon",n)),l(3),w(a==null?null:a.file_name)}}function q(e,m){if(e&1&&(s(0,"li"),p(1,W,7,4),g()),e&2){let i=m.$implicit;l(),d(i?1:-1)}}function B(e,m){if(e&1&&r(0,"img",7),e&2){let i=o(2);c("src",C(i.showImage.original_url),h)}}function G(e,m){if(e&1&&r(0,"img",7),e&2){let i=o(2);c("src",i.getMimeTypeImage(i.showImage.mime_type),h)}}function H(e,m){if(e&1){let i=x();s(0,"li")(1,"div",3),p(2,B,1,2,"img",7)(3,G,1,1,"img",7),s(4,"a",10),f("click",function(){_(i);let n=o();return u(n.remove(n.showImage.id,"single"))}),r(5,"i",9),g()(),s(6,"h6"),v(7),g()()}if(e&2){let i=o();l(2),d(i.showImage&&i.showImage.mime_type&&i.showImage.mime_type.startsWith("image")?2:3),l(5),w(i.showImage.file_name)}}function J(e,m){e&1&&r(0,"img",11)}function K(e,m){if(e&1&&r(0,"img",7),e&2){let i=o(2);c("src",i.StorageURL+i.showImageUrl,h)}}function X(e,m){if(e&1){let i=x();s(0,"li")(1,"div",3),p(2,J,1,0,"img",11)(3,K,1,1,"img",7),s(4,"a",10),f("click",function(){_(i);let n=o();return u(n.remove(1,"single_image_url"))}),r(5,"i",9),g()()()}if(e&2){let i=o();l(2),d(i.videoType.includes(i.showImageUrl.substring(i.showImageUrl.lastIndexOf(".")+1))?2:3)}}function Y(e,m){if(e&1&&(s(0,"p",5),v(1),g()),e&2){let i=o();l(),w(i.helpText())}}var oe=(()=>{let m=class m{constructor(){this.MediaModal=E("mediaModal"),this.id=I(void 0),this.url=I(!1),this.multipleImage=I(!1),this.helpText=I(void 0),this.accept=I(void 0),this.images=[],this.selectedFiles=z(),this.showImages=[],this.videoType=["mp4","webm","ogg"],this.StorageURL=$.storageURL,this.mimeImageMapping=[{mimeType:"application/pdf",imagePath:"assets/images/pdf.png"},{mimeType:"application/msword",imagePath:"assets/images/word.png"},{mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",imagePath:"assets/images/word.png"},{mimeType:"application/vnd.ms-excel",imagePath:"assets/images/xls.png"},{mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",imagePath:"assets/images/xls.png"},{mimeType:"application/vnd.ms-powerpoint",imagePath:"assets/images/folder.png"},{mimeType:"application/vnd.openxmlformats-officedocument.presentationml.presentation",imagePath:"assets/images/folder.png"},{mimeType:"text/plain",imagePath:"assets/images/txt.png"},{mimeType:"audio/mpeg",imagePath:"assets/images/sound.png"},{mimeType:"audio/wav",imagePath:"assets/images/sound.png"},{mimeType:"audio/ogg",imagePath:"assets/images/sound.png"},{mimeType:"video/mp4",imagePath:"assets/images/video.png"},{mimeType:"video/webm",imagePath:"assets/images/video.png"},{mimeType:"video/ogg",imagePath:"assets/images/video.png"},{mimeType:"application/zip",imagePath:"assets/images/zip.png"},{mimeType:"application/x-tar",imagePath:"assets/images/zip.png"},{mimeType:"application/gzip",imagePath:"assets/images/zip.png"}]}ngOnChanges(){this.showImage=this.image,this.showImages=this.images,this.showImageUrl=this.imageUrl}selectImage(a,n){if(Array.isArray(a)?(this.images=a,this.showImages=a):n?(this.imageUrl=a.original_url,this.showImageUrl=a.original_url):(this.image=a,this.showImage=a),this.imageUrl)this.selectedFiles.emit(a.asset_url);else{let t=this.images;this.selectedFiles.emit(t.length?t:this.image)}}remove(a,n){let t=this.images;n=="multiple"&&Array.isArray(t)?(t.splice(a,1),this.showImages=t):n=="single_image_url"?(this.imageUrl=null,this.showImageUrl=null,this.image=null):(this.image=null,this.showImage=null),this.selectedFiles.emit(t.length?t:this.image)}getMimeTypeImage(a){return this.mimeImageMapping.find(n=>n.mimeType==a)?.imagePath}};m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=U({type:m,selectors:[["app-image-upload"]],viewQuery:function(n,t){n&1&&F(t.MediaModal,O,5),n&2&&V()},inputs:{id:[1,"id"],url:[1,"url"],multipleImage:[1,"multipleImage"],helpText:[1,"helpText"],accept:[1,"accept"],images:"images",image:"image",imageUrl:"imageUrl"},outputs:{selectedFiles:"selectedFiles"},features:[T],decls:11,vars:8,consts:[["mediaModal",""],[1,"image-select-list","cursor-pointer"],[1,"choosefile-input",3,"click"],[1,"media-img-box"],["src","assets/images/add-image.png","alt","img",1,"img-fluid","add-icon"],[1,"help-text"],[3,"selectImage","multipleImage","url","accept","selectedImagesIds"],["alt","image",1,"img-fluid",3,"src"],["href","javascript:void(0)",1,"remove-icon",3,"click","id"],[1,"ri-close-line","text-white"],["href","javascript:void(0)",1,"remove-icon",3,"click"],["src","assets/images/video.png","alt","image",1,"img-fluid"]],template:function(n,t){if(n&1){let y=x();s(0,"ul",1)(1,"li",2),f("click",function(){return _(y),u(t.MediaModal().openModal())}),s(2,"div",3),r(3,"img",4),g()(),P(4,q,2,1,"li",null,M),p(6,H,8,2,"li"),p(7,X,6,1,"li"),g(),p(8,Y,2,1,"p",5),s(9,"app-media-modal",6,0),f("selectImage",function(L){return _(y),u(t.selectImage(L,t.url()))}),g()}n&2&&(l(4),S(t.showImages),l(2),d(t.showImage?6:-1),l(),d(t.showImageUrl?7:-1),l(),d(t.helpText()?8:-1),l(),c("multipleImage",t.multipleImage())("url",t.url())("accept",t.accept())("selectedImagesIds",t.showImage?t.showImage:t.showImages!=null&&t.showImages.length?t.showImages:t.showImageUrl?t.showImageUrl:b(7,Q)))},dependencies:[N,D],encapsulation:2});let e=m;return e})();export{oe as a};
