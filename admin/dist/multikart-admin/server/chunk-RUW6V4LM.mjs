import './polyfills.server.mjs';
import{b as F,c as H}from"./chunk-CQLQNQNT.mjs";import"./chunk-CB6KG2CE.mjs";import"./chunk-PTNMHMUQ.mjs";import{d as q}from"./chunk-4U5QTGKH.mjs";import{a as N}from"./chunk-725TIIX2.mjs";import{a as j}from"./chunk-UGRILRVZ.mjs";import"./chunk-HF4BIA72.mjs";import{a as B}from"./chunk-RXOQFJCA.mjs";import"./chunk-MD4PGILL.mjs";import"./chunk-36I6ZS5W.mjs";import"./chunk-7WHNMFBW.mjs";import{oa as Q}from"./chunk-ZL7RZNVT.mjs";import"./chunk-JTNA5OIK.mjs";import"./chunk-D5OUPU4G.mjs";import{c as P,d as E}from"./chunk-XXCMIAG3.mjs";import{Nb as V,Pb as T,Qc as w,Rc as C,Ub as c,Vb as o,Wb as d,Xb as u,dc as M,dd as I,eb as r,gc as _,ic as g,ja as b,pc as v,qa as s,qc as S,ra as m,rb as D,wc as x,xb as h,yc as k,zc as A}from"./chunk-GYKPLZNJ.mjs";import"./chunk-S6KH3LOX.mjs";var W=["mediaModal"],z=["deleteModal"];function G(t,a){if(t&1){let n=M();o(0,"ul")(1,"li"),x(2),w(3,"translate"),d(),o(4,"li")(5,"a",10),_("click",function(){s(n);let e=g(2);return m(e.DeleteModal().openModal("deleteAll",[]))}),u(6,"i",11),d()()()}if(t&2){let n=g(2);r(2),A("",C(3,2,"selected"),"(",n.images.length?n.images.length:0,")")}}function J(t,a){if(t&1&&(o(0,"div",9),V(1,G,7,4,"ul"),d()),t&2){let n=g();r(),T(n.images!=null&&n.images.length?1:-1)}}function K(t,a){if(t&1){let n=M();o(0,"a",12),_("click",function(){s(n);let e=g();return m(e.MediaModal().openModal())}),u(1,"i",13),x(2),w(3,"translate"),d()}t&2&&(r(2),k(" ",C(3,1,"add_media")," "))}var ne=(()=>{let a=class a{constructor(){this.store=b(Q),this.images=[],this.MediaModal=I("mediaModal"),this.DeleteModal=I("deleteModal")}selectImage(i){this.images=i}onActionClicked(i){if(i=="deleteAll"){let e=this.images.map(l=>l?.id);this.store.dispatch(new q(e)).subscribe({complete:()=>{this.images=[]}})}}deleteImage(i){this.images=this.images.filter(e=>e.id!==i)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=D({type:a,selectors:[["app-media"]],viewQuery:function(e,l){e&1&&(v(l.MediaModal,W,5),v(l.DeleteModal,z,5)),e&2&&S(2)},decls:9,vars:8,consts:[["mediaModal",""],["deleteModal",""],[3,"gridClass","title"],["option","","class","selected-options",4,"hasPermission"],["button",""],["class","align-items-center btn btn-theme d-flex",3,"click",4,"hasPermission"],[3,"setDeleteImage","setImage","loading","selectedImages","multiple"],[3,"selectMedia"],[3,"deleteItem"],["option","",1,"selected-options"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-line"],[1,"align-items-center","btn","btn-theme","d-flex",3,"click"],[1,"ri-add-line"]],template:function(e,l){if(e&1){let f=M();o(0,"app-page-wrapper",2),h(1,J,2,1,"div",3),o(2,"div",4),h(3,K,4,3,"a",5),d(),o(4,"app-media-box",6),_("setDeleteImage",function(p){return s(f),m(l.deleteImage(p))})("setImage",function(p){return s(f),m(l.selectImage(p))}),d()(),u(5,"app-media-modal",7,0),o(7,"app-delete-modal",8,1),_("deleteItem",function(p){return s(f),m(l.onActionClicked(p.actionToPerform))}),d()}e&2&&(c("gridClass","col-12")("title","media_library"),r(),c("hasPermission","attachment.destroy"),r(2),c("hasPermission","attachment.create"),r(),c("loading",!1)("selectedImages",l.images)("multiple",!0),r(),c("selectMedia",!1))},dependencies:[E,N,B,F,H,j,P],encapsulation:2});let t=a;return t})();export{ne as Media};
