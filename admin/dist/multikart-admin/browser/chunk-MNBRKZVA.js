import{c as Ve,d as Ee,e as I}from"./chunk-ET4GV3PH.js";import{a as Pe}from"./chunk-BIRJ5HOP.js";import{a as Ie}from"./chunk-UJT5HT3K.js";import"./chunk-GNKIOLDK.js";import{a as Fe}from"./chunk-E4HRHMUF.js";import"./chunk-T64BPCFZ.js";import{a as Se}from"./chunk-VO736VT2.js";import"./chunk-FH3MEI42.js";import{a as Be}from"./chunk-SOFS53MN.js";import"./chunk-5I4ANEOW.js";import"./chunk-4CHXRQ3Z.js";import{a as Ne}from"./chunk-ZEHU2A57.js";import{a as Ae}from"./chunk-HVORON4Y.js";import"./chunk-TQWQFZO7.js";import"./chunk-ZBZRXBUQ.js";import{$ as he,A as ne,B as oe,C as le,D as se,E as pe,F as ce,G as me,H as de,I as ue,W as _e,X as fe,Y as ge,Z as xe,_ as be,aa as ve,c as q,d as Q,da as ye,g as X,h as Y,i as B,k as p,m as Z,oa as F,q as ee,r as te,s as ie,t as re,z as ae}from"./chunk-P74FXGQP.js";import"./chunk-MWLJ7KQD.js";import"./chunk-Z5C4ODF3.js";import{c as we,d as Ce}from"./chunk-NFASJCFR.js";import{Ac as C,Fc as J,Hb as k,Jb as G,Kc as f,Lb as D,Lc as g,Mb as $,Nb as M,Ob as a,Pb as l,Qb as o,Rb as _,Vb as j,Wb as O,Zb as v,ab as i,ac as y,cc as u,g as P,ja as h,lc as U,nb as T,pc as H,qa as x,qc as w,ra as b,rc as L,sc as S,tb as A,tc as W,va as E,x as V,xc as K,yc as R,zc as z}from"./chunk-BJL3QR55.js";import"./chunk-4CLCTAJ7.js";var ke=r=>[r];function Ge(r,c){if(r&1){let n=v();l(0,"app-form-fields",29),_(1,"input",30),f(2,"translate"),o(),l(3,"app-form-fields",29),_(4,"input",31),f(5,"translate"),o(),l(6,"app-form-fields",29),_(7,"input",32),f(8,"translate"),o(),l(9,"app-form-fields",29)(10,"app-image-upload",33),y("selectedFiles",function(e){x(n);let s=u().$index,m=u(3);return b(m.selectParallaxBannerArray(e,s))}),o()(),l(11,"app-form-fields",29)(12,"div",34)(13,"label",35),_(14,"input",36)(15,"span",37),o()()()}if(r&2){let n,t=u().$index,e=u(3);a("label","main_title")("for","main_title"),i(),a("placeholder",C(g(2,21,"enter_main_title"))),i(2),a("label","title")("for","title"),i(),a("placeholder",C(g(5,23,"enter_title"))),i(2),a("label","sub_title")("for","sub_title"),i(),a("placeholder",C(g(8,25,"enter_sub_title"))),i(2),a("label","image")("for","image_url"),i(),a("url",!0)("accept",J(27,ke,e.mediaConfig.image))("multipleImage",!1)("helpText","*Upload image size 376x231px recommended")("imageUrl",(n=e.form.get("content.parallax_banner.banners"))==null?null:n.value[t].image_url),i(),a("label","status")("for","status"+t)}}function De(r,c){if(r&1){let n=v();l(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"button",23),w(6),f(7,"translate"),o()(),l(8,"div",24)(9,"div",25),A(10,Ge,16,29,"ng-template"),o()()()()(),l(11,"div",26)(12,"a",27),y("click",function(){let e=x(n).$index,s=u(3);return b(s.removeParallaxBanner(e))}),_(13,"i",28),o()()()}if(r&2){let n=c.$index;a("formGroupName",C(n)),i(3),a("collapsed",!1),i(3),W(" ",g(7,5,"banner")," ",n+1," ")}}function $e(r,c){if(r&1&&(l(0,"div",16)(1,"div",17),j(2),$(3,De,14,7,"div",18,D),O(),o()()),r&2){let n=u(2);i(3),M(n.parallaxBannersArray.controls)}}function Me(r,c){if(r&1){let n=v();l(0,"div",14)(1,"app-button",15),y("click",function(e){x(n);let s=u();return b(s.addParallaxBanner(e))}),w(2),f(3,"translate"),o(),k(4,$e,5,0,"div",16),o()}if(r&2){let n=u();i(),H("btn btn-animation mb-3"),a("id","add_banners_btn")("spinner",!1),i(),S(" ",g(3,6,"add_banners")," "),i(2),G(!(n.parallaxBannersArray==null||n.parallaxBannersArray.controls==null)&&n.parallaxBannersArray.controls.length?4:-1)}}function je(r,c){r&1&&(l(0,"app-button",38),w(1),f(2,"translate"),o()),r&2&&(a("id","theme_1_submit"),i(),S(" ",g(2,2,"submit")," "))}var ot=(()=>{let c=class c{constructor(){this.store=h(F),this.formBuilder=h(ne),this.document=h(E),this.home_page$=h(F).select(I.homePage),this.active="parallax_banner",this.banner=1,this.search=new P,this.mediaConfig=Ie,this.filter={status:1,search:"",paginate:15,ids:"",with_union_products:0,is_approved:1},this.form=new B({content:new B({parallax_banner:new B({status:new p(!0),banners:new ae([])})}),slug:new p("parallax")})}ngOnInit(){let t=this.store.dispatch(new Ve({slug:"parallax"}));V([t]).subscribe({complete:()=>{this.store.select(I.homePage).subscribe({next:e=>{e?.content?.products_ids&&(this.filter.paginate=e?.content?.products_ids?.length>=15?e?.content?.products_ids?.length:15,this.filter.ids=e?.content?.products_ids?.join(),this.filter.with_union_products=e?.content?.products_ids?.length?e?.content?.products_ids?.length>=15?0:1:0),this.store.dispatch(new Se(this.filter)).subscribe({complete:()=>{this.patchForm()}})}})}})}patchForm(){this.home_page$.subscribe(t=>{this.page_data=t,this.form.patchValue({content:{parallax_banner:{status:t?.content?.parallax_banner?.status}},slug:t?.slug}),this.parallaxBannersArray.clear(),t?.content?.parallax_banner?.banners?.forEach(e=>this.parallaxBannersArray.push(this.formBuilder.group({status:new p(e?.status),main_title:new p(e?.main_title),title:new p(e?.title),sub_title:new p(e?.sub_title),image_url:new p(e?.image_url)})))})}selectCategoryItem(t,e){Array.isArray(t)&&this.form.get(e)?.setValue(t)}searchProduct(t){this.search.next(t.search)}get parallaxBannersArray(){return this.form.get("content.parallax_banner.banners")}addParallaxBanner(t){t.preventDefault(),this.parallaxBannersArray.push(this.formBuilder.group({main_title:new p(""),title:new p(""),sub_title:new p(""),image_url:new p,status:new p(!0)}))}removeParallaxBanner(t){this.parallaxBannersArray.length<=1||this.parallaxBannersArray.removeAt(t)}selectParallaxBannerArray(t,e){this.parallaxBannersArray.at(e).get("image_url")?.setValue(t||null)}selectImage(t,e){this.form.get(e)?.setValue(t||null)}concatDynamicProductKeys(t){let e=[];function s(m){if(Array.isArray(m))m.forEach(s);else if(m!==null&&typeof m=="object")for(let[N,d]of Object.entries(m))N==="product_ids"&&Array.isArray(d)&&d.every(Te=>typeof Te=="number")?e.push(...d):N==="product_ids"&&typeof d=="number"?e.push(d):s(d)}return s(t),e}submit(){let t=Array.from(new Set(this.concatDynamicProductKeys(this.form.value)));this.form.get("content.products_ids")?.setValue(t),this.form.valid&&this.store.dispatch(new Ee(this.page_data.id,this.form.value))}};c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=T({type:c,selectors:[["app-parallax"]],decls:16,vars:9,consts:[["nav","ngbNav"],[3,"gridClass","title"],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[1,"vertical-tabs"],[1,"row"],[1,"col-xl-3","col-lg-4"],["ngbNav","","orientation","vertical","formGroupName","content",1,"nav-pills",3,"activeIdChange","activeId"],["ngbNavItem","parallax_banner"],["ngbNavLink",""],[1,"ri-record-circle-line"],["ngbNavContent",""],[1,"col-xl-7","col-lg-8"],[3,"ngbNavOutlet"],[3,"id",4,"hasPermission"],["formGroupName","parallax_banner"],[3,"click","id","spinner"],[1,"shipping-accordion","variant-accordion"],["formArrayName","banners"],[1,"d-flex",3,"formGroupName"],[1,"col-11"],["ngbAccordion",""],["ngbAccordionItem","",3,"collapsed"],["ngbAccordionHeader",""],["ngbAccordionButton",""],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[1,"col-1","text-center","fs-20"],["href","javascript:void(0)",1,"invalid-feedback","text-end","cursor-pointer","d-inline-block","w-auto","mt-2",3,"click"],[1,"ri-close-line"],[3,"label","for"],["id","main_title","type","text","formControlName","main_title",1,"form-control",3,"placeholder"],["id","title","type","text","formControlName","title",1,"form-control",3,"placeholder"],["id","sub_title","type","text","formControlName","sub_title",1,"form-control",3,"placeholder"],[3,"selectedFiles","url","accept","multipleImage","helpText","imageUrl"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"]],template:function(e,s){if(e&1){let m=v();l(0,"app-page-wrapper",1)(1,"form",2),y("ngSubmit",function(){return x(m),b(s.submit())}),l(2,"div",3)(3,"div",4)(4,"div",5)(5,"ul",6,0),z("activeIdChange",function(d){return x(m),R(s.active,d)||(s.active=d),b(d)}),l(7,"li",7)(8,"a",8),_(9,"i",9),w(10),f(11,"translate"),o(),A(12,Me,5,8,"ng-template",10),o()()(),l(13,"div",11),_(14,"div",12),o()(),A(15,je,3,4,"app-button",13),o()()()}if(e&2){let m=U(6);a("gridClass","col-sm-12")("title","parallax_settings"),i(),a("formGroup",s.form),i(4),K("activeId",s.active),i(5),L(g(11,7,"parallax_banner")),i(4),a("ngbNavOutlet",m),i(),a("hasPermission","theme.edit")}},dependencies:[Ce,oe,Z,Q,q,X,Y,le,ee,re,te,ie,ye,ce,ue,de,me,se,pe,_e,xe,ge,fe,he,be,ve,Be,Ne,Ae,Fe,Pe,we],encapsulation:2});let r=c;return r})();export{ot as Parallax};
